#!/bin/bash

# SonarCloud Setup Script
# This script helps you complete the SonarCloud setup

echo "üîß SonarCloud Setup Helper"
echo "=========================="
echo ""

echo "‚úÖ Code Implementation Complete!"
echo "  - pom.xml updated with SonarCloud plugin"
echo "  - sonar-project.properties created"
echo "  - GitHub Actions workflows configured"
echo "  - Security vulnerabilities added for demonstration"
echo ""

echo "üìã NEXT STEPS REQUIRED:"
echo ""

echo "1Ô∏è‚É£ Create SonarCloud Account:"
echo "   - Go to https://sonarcloud.io"
echo "   - Sign in with your GitHub account: namgay282004"
echo "   - Import organization: namgay282004"
echo "   - Select repository: ci-cd-a"
echo ""

echo "2Ô∏è‚É£ Generate SonarCloud Token:"
echo "   - In SonarCloud: Account ‚Üí My Account ‚Üí Security"
echo "   - Generate token named: 'cicd-demo-github-actions'"
echo "   - Copy the token (you won't see it again!)"
echo ""

echo "3Ô∏è‚É£ Configure GitHub Secrets:"
echo "   - Go to your repository: https://github.com/Namgay282004/ci-cd-a"
echo "   - Settings ‚Üí Secrets and variables ‚Üí Actions"
echo "   - Add SONAR_TOKEN: [paste your token]"
echo "   - Add SONAR_ORGANIZATION: namgay282004"
echo ""

echo "4Ô∏è‚É£ Push Changes and Test:"
echo "   git add ."
echo "   git commit -m \"feat: Add SonarCloud integration with security analysis\""
echo "   git push origin master"
echo ""

echo "5Ô∏è‚É£ Monitor Results:"
echo "   - GitHub Actions: Check workflow execution"
echo "   - SonarCloud Dashboard: Review security findings"
echo "   - Expected findings:"
echo "     * SQL Injection vulnerabilities"
echo "     * Path traversal issues"
echo "     * Hard-coded credentials"
echo "     * Weak cryptography (MD5)"
echo "     * Information disclosure"
echo ""

echo "üìä Expected Security Findings:"
echo "   üî¥ Critical: SQL Injection (VulnerableController.getUserById)"
echo "   üî¥ High: Path Traversal (VulnerableController.readFile)"
echo "   üü° Medium: Hard-coded credentials (DB_PASSWORD, API_KEY)"
echo "   üü° Medium: Weak cryptography (MD5 hashing)"
echo "   üü° Medium: Command injection risk"
echo "   üü° Medium: Information disclosure"
echo ""

echo "üìù Files Modified/Created:"
echo "   ‚úÖ pom.xml - SonarCloud & JaCoCo plugins"
echo "   ‚úÖ sonar-project.properties - Project configuration"
echo "   ‚úÖ .github/workflows/maven.yml - Enhanced with SonarCloud"
echo "   ‚úÖ .github/workflows/sonarcloud.yml - Dedicated security workflow"
echo "   ‚úÖ VulnerableController.java - Demo security vulnerabilities"
echo "   ‚úÖ VulnerableControllerTest.java - Test coverage"
echo "   ‚úÖ SONARCLOUD_SETUP_REPORT.md - Comprehensive documentation"
echo "   ‚úÖ SECURITY_CHECKLIST.md - Implementation checklist"
echo ""

echo "üîó Important Links:"
echo "   SonarCloud: https://sonarcloud.io"
echo "   Project Dashboard: https://sonarcloud.io/dashboard?id=namgay282004_ci-cd-a"
echo "   GitHub Repo: https://github.com/Namgay282004/ci-cd-a"
echo ""

echo "‚ö†Ô∏è  REMINDER: The VulnerableController contains intentional security"
echo "    vulnerabilities for demonstration purposes only. DO NOT use"
echo "    this code in production environments!"
echo ""

echo "üéØ Success Criteria:"
echo "   - SonarCloud shows security analysis results"
echo "   - GitHub Actions workflows run successfully"
echo "   - Quality gate is configured and enforced"
echo "   - At least 5+ security issues are identified"
echo "   - Screenshots taken for submission"
echo ""

echo "‚ú® Setup complete! Follow the steps above to finish the integration."
